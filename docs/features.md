# Visual CMS Editor - 기능 명세서

## 핵심 기능

### 1. 이중 모드 시스템
- **디자인 모드**: 레이아웃과 구조를 정의하는 개발자/디자이너 전용 모드
- **컨텐츠 모드**: 지정된 영역만 편집 가능한 안전한 편집자 모드
- **모드 전환**: 권한 기반 자동 전환

### 2. Loro CRDT 기반 실시간 협업
- 여러 사용자의 동시 편집 지원
- 충돌 없는 자동 병합
- 오프라인 작업 후 동기화
- 완벽한 변경 이력 추적

### 3. 컴포넌트 시스템
- 재사용 가능한 컴포넌트 등록
- 컴포넌트별 편집 가능 영역 정의
- TypeScript 기반 타입 안전성
- 커스텀 컴포넌트 지원

### 4. 편집 가능 영역 (Editable Zones)
- 텍스트, 이미지, 리스트 등 다양한 타입 지원
- 영역별 제약사항 설정 (길이, 포맷 등)
- 검증 규칙 적용
- 실시간 유효성 검사

### 5. 버전 관리
- 모든 변경사항 자동 저장
- 특정 시점으로 롤백
- 버전 간 비교
- 브랜치 및 머지 (향후 계획)

## 구현 상태

### 완료된 기능
- [x] 프로젝트 초기 설정
- [x] 기본 문서 구조 작성
- [x] 요구사항 문서 작성
- [x] 데모 페이지 생성

### 진행 중
- [x] Selection 시스템 구현
  - 클릭으로 선택
  - 다중 선택 (Shift/Cmd+클릭)
  - 키보드 네비게이션
  - Selection Overlay UI
  - 더블클릭으로 바로 편집
- [x] 텍스트 편집 기능
  - 줄바꿈 지원
  - 편집 모드 간 전환
  - 커서 위치 제어
- [x] CSR Only 설정
- [x] Tailwind CSS 완전 적용
- [x] Loro CRDT 기반 History 시스템
  - 텍스트 변경 내용 추적
  - 실행 취소/다시 실행 (Undo/Redo)
  - 키보드 단축키 (Cmd/Ctrl+Z, Cmd/Ctrl+Shift+Z)
  - UI 버튼으로 실행 취소/다시 실행
  - Inspector 패널에서 변경 기록 확인
    - 현재 버전 번호
    - 전체 변경 횟수
    - Undo/Redo 가능 상태
- [x] 템플릿 시스템 (2025-01-03)
  - HTML 템플릿을 편집 가능한 Svelte 컴포넌트로 변환
  - 템플릿 카테고리별 관리 (히어로, 기능 소개, CTA 등)
  - 템플릿 선택 UI 모달
  - 템플릿 미리보기 및 코드 보기
  - 동적 템플릿 렌더링
  - 편집 가능 영역 자동 설정
  - 제약사항 자동 적용
- [ ] 플러그인 시스템 설계

### 예정된 기능
- [ ] 디자인/컨텐츠 모드 구현
- [ ] 컴포넌트 레지스트리
- [ ] 비주얼 에디터 UI
- [ ] 실시간 동기화
- [ ] 스토리지 어댑터
- [ ] 프레임워크 어댑터 (Svelte, React, Vue)

## 기술적 특징

### 성능
- 가상화를 통한 대규모 문서 처리
- 효율적인 diff 알고리즘
- 레이지 로딩 지원

### 확장성
- 플러그인 아키텍처
- 커스텀 스토리지 어댑터
- 테마 시스템

### 개발자 경험
- 간단한 API
- 상세한 TypeScript 타입
- 풍부한 문서화
- 개발자 도구 지원