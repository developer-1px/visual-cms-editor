# Visual CMS Editor - 요구사항 문서

## 핵심 원칙

### 1. 디자인과 컨텐츠의 완전한 분리

- **디자인 보호**: 컨텐츠 편집자는 레이아웃, 구조, 스타일을 변경할 수 없음
- **안전한 편집**: 지정된 편집 가능 영역에서만 콘텐츠 수정 가능
- **구조 유지**: 콘텐츠를 삭제해도 컨테이너와 레이아웃은 그대로 유지

### 2. 편집 가능한 요소

- **텍스트**: `contenteditable="plaintext-only"`로 순수 텍스트만 편집
- **이미지**: URL/src 변경만 가능
- **링크**: href 주소 변경만 가능
- **아이콘**: 아이콘 종류 선택만 가능
- **색상**: 지정된 색상값 변경만 가능

### 3. 반복형 컨테이너 규칙

- **추가/삭제 가능**: 카드 리스트, 슬라이드 등 반복 요소
- **순서 변경 가능**: 드래그 앤 드롭으로 재배치
- **구조 복사**: 동일한 구조로만 추가

## UI/UX 요구사항

### 1. Selection Overlay UI (핵심)

- **단일 선택**: 클릭으로 요소 선택
- **다중 선택**: Shift/Cmd + 클릭
- **시각적 피드백**: 선택된 요소 하이라이트
- **컨텍스트 액션**: 선택 시 가능한 작업 표시

### 2. 키보드 중심 인터랙션

- **네비게이션**: 방향키로 요소 간 이동
- **편집 시작**: Enter 키
- **편집 종료**: Esc 키
- **클립보드**: Cmd/Ctrl + C/X/V
- **실행 취소**: Cmd/Ctrl + Z/Y

### 3. Compact UI

- **최소 인터페이스**: 작은 플로팅 툴바
- **아이콘 중심**: 텍스트 최소화
- **컨텍스트 기반**: 필요한 도구만 표시
- **키보드 단축키 힌트**: 툴팁에 표시

## 기술 아키텍처

### 1. 3단계 컴포넌트 체계

```
요소 (Element)
├── 텍스트
├── 이미지
├── 링크
├── 아이콘
└── 색상

반복 (Repeatable)
├── 리스트
├── 그리드
└── 슬라이더

조립 (Composite)
├── 섹션
├── 레이아웃
└── 페이지
```

### 2. 플러그인 시스템

```typescript
interface EditorPlugin {
  // 플러그인 식별자
  name: string

  // 이 플러그인이 편집할 수 있는 요소인지 판단
  canEdit(element: HTMLElement): boolean

  // 편집 UI 생성
  createEditor(element: HTMLElement): EditorUI

  // 값 변경 처리
  handleChange(element: HTMLElement, value: any): void

  // 키보드 단축키
  shortcuts?: KeyboardShortcut[]
}
```

### 3. 데이터 속성 기반 마크업

```html
<!-- 편집 가능한 텍스트 -->
<h1
  data-editable="text"
  data-max-length="50"
>
  제목
</h1>

<!-- 편집 가능한 이미지 -->
<img
  data-editable="image"
  src="..."
  alt="..."
/>

<!-- 반복 가능한 컨테이너 -->
<ul
  data-repeatable="list-item"
  data-min="1"
  data-max="10"
>
  <li>항목 1</li>
  <li>항목 2</li>
</ul>
```

## MVP 구현 우선순위

### Phase 1: 기본 Selection 시스템

1. 요소 선택/다중 선택
2. 키보드 네비게이션
3. 선택 오버레이 UI

### Phase 2: 텍스트 편집

1. contenteditable 통합
2. 텍스트 전용 편집
3. 실행 취소/다시 실행

### Phase 3: 플러그인 확장

1. 이미지 URL 편집
2. 링크 주소 편집
3. 색상 선택기

### Phase 4: 반복형 컨테이너

1. 아이템 추가/삭제
2. 순서 변경
3. 복사/붙여넣기

## 제약사항

### 1. 편집 불가능한 것들

- HTML 구조 변경
- CSS 스타일 수정 (지정된 속성 제외)
- 레이아웃 변경
- 컴포넌트 타입 변경
- 클래스명 수정

### 2. 보안 고려사항

- XSS 방지: 모든 입력값 sanitize
- 스크립트 실행 방지
- 안전한 URL 검증

## 성능 목표

- 선택 응답시간: < 50ms
- 편집 시작: < 100ms
- 1000개 요소에서도 부드러운 스크롤
- 메모리 효율적인 이벤트 관리
